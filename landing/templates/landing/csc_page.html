<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Step-by-Step Application Form</title>
  <style>
    /* your existing styles unchanged */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; }

    body {
      display: flex;
      min-height: 100vh;
      background-color: #f9f9f9;
    }

    .info-sidebar {
      width: 250px;
      padding: 20px;
      background-color: #f4f4f4;
      border-right: 2px solid #ddd;
    }

    .sidebar-header {
      font-size: 18px;
      color: #172a64;
      cursor: pointer;
      padding: 8px;
      margin-bottom: 5px;
      transition: background 0.3s ease;
    }

    .sidebar-header:hover {
      background-color: #e2e2e2;
    }

    .sidebar-header.active {
      background-color: #172a64;
      color: #fff;
    }

    .sidebar-items {
      list-style-type: none;
      padding-left: 15px;
      display: none;
    }

    .sidebar-items li {
      font-size: 14px;
      color: #333;
      margin: 6px 0;
    }

    .main-content {
      flex: 1;
      padding: 40px;
    }

    .form-container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border: 1px solid #ccc;
      display: none;
    }

    .form-step {
      display: none;
    }

    .form-step.active {
      display: block;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    .btn {
      padding: 10px 20px;
      cursor: pointer;
      background-color: #172a64;
      color: white;
      border: none;
      font-size: 14px;
    }

    .btn:disabled {
      background-color: #999;
    }

    .choice-buttons {
      margin-top: 20px;
      display: flex;
      gap: 20px;
    }

    .choice-buttons button {
      flex: 1;
      padding: 12px;
      font-weight: bold;
      background-color: #172a64;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .choice-buttons button:hover {
      background-color: #2c3e87;
    }
  </style>
</head>
<body>

<div class="info-sidebar">
  <div class="sidebar-section">
    <div class="sidebar-header active" onclick="selectForm('application', this)">Application Request</div>
  </div>
</div>

<div class="main-content">
  <form id="form-container-application" class="form-container" style="display:block;">
    <!-- Step 1 -->
    <div class="form-step active">
      <h3>Step 1: Basic Information</h3>
      <label for="doc-code">Document Code</label>
      <input type="text" id="doc-code" required>

      <label for="rev-no">Rev. No.</label>
      <input type="text" id="rev-no" required>

      <label for="eff-date">Eff. Date</label>
      <input type="date" id="eff-date" required>

      <label for="page">Page</label>
      <input type="text" id="page" required>

      <label for="ref-no">Reference No.</label>
      <input type="text" id="ref-no" required>

      <label for="date-request">Date of Request</label>
      <input type="date" id="date-request" required>

      <label for="client-name">Name of Client/ Organization</label>
      <input type="text" id="client-name" required>

      <label for="contact-details">Contact Details</label>
      <input type="text" id="contact-details" required>
    </div>

    <!-- Step 2 -->
    <div class="form-step">
      <h3>Step 2: Other Needed Information</h3>

      <label for="last-name">Last Name</label>
      <input type="text" id="last-name" required>

      <label for="middle-name">Middle Name</label>
      <input type="text" id="middle-name" required>

      <label for="last-name-ext">Last Name, Ext.</label>
      <input type="text" id="last-name-ext">

      <label for="address">Address</label>
      <input type="text" id="address" required>

      <label for="position-held">Position</label>
      <input type="text" id="position-held" required>

      <label for="term-office">Term of Office</label>
      <input type="text" id="term-office" required>
    </div>

    <!-- Step 3 -->
    <div class="form-step">
      <h3>Step 3: Select Official Type</h3>
      <div class="choice-buttons">
        <button type="button" onclick="selectOfficialType('appointed')">Appointed</button>
        <button type="button" onclick="selectOfficialType('elected')">Elected</button>
      </div>
    </div>

    <!-- Step 4 - Appointed Official Form -->
    <div class="form-step" id="appointed-step" style="display:none;">
      <h3>Appointive Official</h3>
      <p><em>- Brgy. Treasurer, Brgy. Secretary</em></p>

      <label for="app-last-name">Last Name</label>
      <input type="text" id="app-last-name" required>

      <label for="app-first-name">First Name</label>
      <input type="text" id="app-first-name" required>

      <label for="app-middle-name">Middle Name</label>
      <input type="text" id="app-middle-name" required>

      <label for="app-position">Position Held</label>
      <input type="text" id="app-position" required>

      <label for="app-date-appointment">Date Appointment (Start from most recent)</label>
      <input type="date" id="app-date-appointment" required>

      <label for="app-inclusive-from">Inclusive Dates of Years Served - From</label>
      <input type="date" id="app-inclusive-from" required>

      <label for="app-inclusive-to">Inclusive Dates of Years Served - To</label>
      <input type="date" id="app-inclusive-to" required>

      <label for="app-years-rendered">No. of Years Rendered</label>
      <input type="number" id="app-years-rendered" min="0" required>

      <label for="app-punong-name">Appointing Punong Barangay - Full Name</label>
      <input type="text" id="app-punong-name" required>

      <label for="app-punong-date-elected">Date Elected</label>
      <input type="date" id="app-punong-date-elected" required>

      <label for="app-punong-term-office">Term of Office (No. Of years)</label>
      <input type="text" id="app-punong-term-office" required>

      <label for="app-date-today">Date Today</label>
      <input type="date" id="app-date-today" required>
    </div>

    <!-- Step 4 - Elected Official Form -->
    <div class="form-step" id="elected-step" style="display:none;">
      <h3>Elective Official</h3>
      <p><em>- SK Chairperson/Chairman, Punong Brgy., Sanguniang Barangay Member (Brgy. Kagawad)</em></p>

      <label for="ele-last-name">Last Name</label>
      <input type="text" id="ele-last-name" required>

      <label for="ele-first-name">First Name</label>
      <input type="text" id="ele-first-name" required>

      <label for="ele-middle-initial">Middle Initial</label>
      <input type="text" id="ele-middle-initial" required>

      <label for="ele-position-held">Position Held</label>
      <input type="text" id="ele-position-held" required>

      <label for="ele-date-election">Date of Election</label>
      <input type="date" id="ele-date-election" required>

      <label for="ele-term-office">Term of Office</label>
      <input type="text" id="ele-term-office" required>

      <label for="ele-inclusive-from">Inclusive Dates From</label>
      <input type="date" id="ele-inclusive-from" required>

      <label for="ele-inclusive-to">Inclusive Dates To</label>
      <input type="date" id="ele-inclusive-to" required>

      <label><input type="checkbox" id="ele-term-completed"> Term Completed?</label>

      <label><input type="checkbox" id="ele-succeeded"> Succeeded to the Position?</label>
    </div>

    <!-- Step 5 - Review -->
    <div class="form-step" id="review-step" style="display:none;">
      <h3>Step 5: Review Your Information</h3>
      <div id="review-content" style="background:#eee; padding: 15px; border-radius: 5px; max-height: 400px; overflow-y:auto;"></div>
    </div>

    <div class="button-group">
      <button type="button" id="prev-btn" class="btn" onclick="prevStep()" disabled>Previous</button>
      <button type="button" id="next-btn" class="btn" onclick="nextStep()">Next</button>
      <button type="submit" id="submit-btn" class="btn" style="display:none;">Submit</button>
    </div>
  </form>
</div>

<script>
  const form = document.getElementById('form-container-application');
  const steps = Array.from(form.querySelectorAll('.form-step'));
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');
  const submitBtn = document.getElementById('submit-btn');
  const reviewContent = document.getElementById('review-content');

  let currentStep = 0;
  let officialType = null;  // appointed or elected

  function showStep(step) {
    steps.forEach((s, i) => {
      s.classList.toggle('active', i === step);
      // Handle appointed/elected step visibility for step 3
      if (s.id === 'appointed-step' || s.id === 'elected-step') {
        s.style.display = (i === step && officialType && s.id.startsWith(officialType)) ? 'block' : 'none';
      }
      if (s.id === 'review-step') {
        s.style.display = (i === step) ? 'block' : 'none';
      }
    });

    prevBtn.disabled = step === 0;
    nextBtn.style.display = step === steps.length - 2 ? 'inline-block' : 'inline-block';
    submitBtn.style.display = step === steps.length - 1 ? 'inline-block' : 'none';

    if (step === steps.length - 1) {
      displayReview();
    }
  }

  function validateStep(step) {
    const activeStep = steps[step];
    const inputs = Array.from(activeStep.querySelectorAll('input, select, textarea')).filter(input => !input.disabled && input.required);
    for (const input of inputs) {
      if (input.type === 'checkbox') {
        // skip required for checkbox (none are marked required here)
        continue;
      }
      if (!input.value) {
        alert(`Please fill out the field: "${input.previousElementSibling ? input.previousElementSibling.innerText : input.id}"`);
        input.focus();
        return false;
      }
    }
    return true;
  }

  function nextStep() {
    // Special case: If current step is 3 (index 3) and officialType not selected yet, block proceeding
    if (currentStep === 2 && !officialType) {
      alert('Please select an official type: Appointed or Elected.');
      return;
    }

    if (!validateStep(currentStep)) return;

    // If on step 3 (the officialType step), when next pressed:
    if (currentStep === 2) {
      // Show the appointed or elected form on step 4 accordingly
      if (officialType === 'appointed') {
        steps[3].id = 'appointed-step';
      } else if (officialType === 'elected') {
        steps[3].id = 'elected-step';
      }
    }

    if (currentStep < steps.length - 1) {
      currentStep++;
      showStep(currentStep);
    }
  }

  function prevStep() {
    if (currentStep > 0) {
      currentStep--;
      showStep(currentStep);
    }
  }

  function selectOfficialType(type) {
    officialType = type;
    // Show appointed or elected step
    if (type === 'appointed') {
      document.getElementById('appointed-step').style.display = 'block';
      document.getElementById('elected-step').style.display = 'none';
    } else {
      document.getElementById('appointed-step').style.display = 'none';
      document.getElementById('elected-step').style.display = 'block';
    }
  }

  function displayReview() {
    // Gather all form values and display in reviewContent
    let html = '<h4>Basic Information</h4><ul>';
    html += `<li>Document Code: ${document.getElementById('doc-code').value}</li>`;
    html += `<li>Rev. No.: ${document.getElementById('rev-no').value}</li>`;
    html += `<li>Eff. Date: ${document.getElementById('eff-date').value}</li>`;
    html += `<li>Page: ${document.getElementById('page').value}</li>`;
    html += `<li>Reference No.: ${document.getElementById('ref-no').value}</li>`;
    html += `<li>Date of Request: ${document.getElementById('date-request').value}</li>`;
    html += `<li>Name of Client/Organization: ${document.getElementById('client-name').value}</li>`;
    html += `<li>Contact Details: ${document.getElementById('contact-details').value}</li>`;
    html += '</ul>';

    html += '<h4>Additional Information</h4><ul>';
    html += `<li>Last Name: ${document.getElementById('last-name').value}</li>`;
    html += `<li>Middle Name: ${document.getElementById('middle-name').value}</li>`;
    html += `<li>Last Name, Ext.: ${document.getElementById('last-name-ext').value}</li>`;
    html += `<li>Address: ${document.getElementById('address').value}</li>`;
    html += `<li>Position: ${document.getElementById('position-held').value}</li>`;
    html += `<li>Term of Office: ${document.getElementById('term-office').value}</li>`;
    html += '</ul>';

    html += `<h4>Official Type Selected: ${officialType.charAt(0).toUpperCase() + officialType.slice(1)}</h4>`;

    if (officialType === 'appointed') {
      html += '<h4>Appointed Official Information</h4><ul>';
      html += `<li>Last Name: ${document.getElementById('app-last-name').value}</li>`;
      html += `<li>First Name: ${document.getElementById('app-first-name').value}</li>`;
      html += `<li>Middle Name: ${document.getElementById('app-middle-name').value}</li>`;
      html += `<li>Position Held: ${document.getElementById('app-position').value}</li>`;
      html += `<li>Date Appointment: ${document.getElementById('app-date-appointment').value}</li>`;
      html += `<li>Inclusive Dates From: ${document.getElementById('app-inclusive-from').value}</li>`;
      html += `<li>Inclusive Dates To: ${document.getElementById('app-inclusive-to').value}</li>`;
      html += `<li>No. of Years Rendered: ${document.getElementById('app-years-rendered').value}</li>`;
      html += `<li>Appointing Punong Barangay: ${document.getElementById('app-punong-name').value}</li>`;
      html += `<li>Date Elected (Punong Barangay): ${document.getElementById('app-punong-date-elected').value}</li>`;
      html += `<li>Term of Office (Punong Barangay): ${document.getElementById('app-punong-term-office').value}</li>`;
      html += `<li>Date Today: ${document.getElementById('app-date-today').value}</li>`;
      html += '</ul>';
    } else if (officialType === 'elected') {
      html += '<h4>Elected Official Information</h4><ul>';
      html += `<li>Last Name: ${document.getElementById('ele-last-name').value}</li>`;
      html += `<li>First Name: ${document.getElementById('ele-first-name').value}</li>`;
      html += `<li>Middle Initial: ${document.getElementById('ele-middle-initial').value}</li>`;
      html += `<li>Position Held: ${document.getElementById('ele-position-held').value}</li>`;
      html += `<li>Date of Election: ${document.getElementById('ele-date-election').value}</li>`;
      html += `<li>Term of Office: ${document.getElementById('ele-term-office').value}</li>`;
      html += `<li>Inclusive Dates From: ${document.getElementById('ele-inclusive-from').value}</li>`;
      html += `<li>Inclusive Dates To: ${document.getElementById('ele-inclusive-to').value}</li>`;
      html += `<li>Term Completed: ${document.getElementById('ele-term-completed').checked ? 'Yes' : 'No'}</li>`;
      html += `<li>Succeeded to the Position: ${document.getElementById('ele-succeeded').checked ? 'Yes' : 'No'}</li>`;
      html += '</ul>';
    }

    reviewContent.innerHTML = html;
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    alert('Form submitted successfully!');
    // You can do actual form submission here (send data to server)
    form.reset();
    currentStep = 0;
    officialType = null;
    showStep(currentStep);
    // Reset appointed/elected visibility
    document.getElementById('appointed-step').style.display = 'none';
    document.getElementById('elected-step').style.display = 'none';
  });

  // Initialize display
  showStep(currentStep);
</script>

</body>
</html>
